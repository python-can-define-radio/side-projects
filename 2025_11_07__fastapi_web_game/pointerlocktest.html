<html>

<body>
    <canvas id="gameCanvas" width="800" height="600" style="border:1px solid black;"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let x = canvas.width / 2;
let y = canvas.height / 2;

canvas.addEventListener('click', () => {
  // Request fullscreen first
  if (canvas.requestFullscreen) {
    canvas.requestFullscreen().then(() => {
      canvas.requestPointerLock({unadjustedMovement: true});
    }).catch(err => {
      // fallback if fullscreen fails
      canvas.requestPointerLock({unadjustedMovement: true});
    });
  } else {
    canvas.requestPointerLock({unadjustedMovement: true});
  }
});

document.addEventListener('pointerlockchange', () => {
  if (document.pointerLockElement === canvas) {
    document.addEventListener("mousemove", updatePosition, false);
  } else {
    document.removeEventListener("mousemove", updatePosition, false);
  }
});

function updatePosition(e) {
  // Update tracked position using relative movement
  x += e.movementX;
  y += e.movementY;

  // Clamp to canvas bounds so it doesnâ€™t go off-screen
//   x = Math.max(0, Math.min(canvas.width, x));
//   y = Math.max(0, Math.min(canvas.height, y));

  drawScene();
}

function drawScene() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Background
  ctx.fillStyle = "lightblue";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Position text
  ctx.fillStyle = "black";
  ctx.font = "20px Arial";
  ctx.fillText(`Position: (${x}, ${y})`, 20, 30);

  // Draw crosshair at current position
  ctx.strokeStyle = "red";
  ctx.beginPath();
  ctx.moveTo(x - 10, y);
  ctx.lineTo(x + 10, y);
  ctx.moveTo(x, y - 10);
  ctx.lineTo(x, y + 10);
  ctx.stroke();
}

// Initial draw
drawScene();
</script>


</body>

</html>